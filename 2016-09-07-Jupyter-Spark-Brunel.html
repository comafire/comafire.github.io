<!DOCTYPE html>
<html lang="ko">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>comafire</title>


        <!-- Bootstrap Core CSS -->
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="/theme/css/code_blocks/darkly.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->




        <meta name="tags" contents="Spark" />
        <meta name="tags" contents="Brunel" />


			<meta property="og:locale" content="ko">
		<meta property="og:site_name" content="comafire">

	<meta property="og:type" content="article">
	<meta property="article:author" content="">
	<meta property="og:url" content="/2016-09-07-Jupyter-Spark-Brunel.html">
	<meta property="og:title" content="Jupyter에서 Spark, Brunel을 이용해 데이터 시각화하기">
	<meta property="og:description" content="">
	<meta property="og:image" content="/">
	<meta property="article:published_time" content="2016-09-07 00:00:00+09:00">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">comafire</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-image: url('/theme/images/post-bg.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Jupyter에서 Spark, Brunel을 이용해 데이터 시각화하기</h1>
                        <span class="meta">Posted by
                                <a href="/author/comafire.html">comafire</a>
                             on Wed 07 September 2016
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
@-moz-document url-prefix() {
  div.inner_cell {
    overflow-x: hidden;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>이전 글에서 Apache Toree Scala Kernel 을 이용해서 Jupyter 에서 Apache Spark을 사용하는 법을 알아봤습니다.</p>
<p><a href="https://comafire.github.io/2016-08-30-Jupyter-Spark.html">https://comafire.github.io/2016-08-30-Jupyter-Spark.html</a></p>
<p>Spark에서 Scala를 사용하면서 아쉬웠던 점 중 하나가 Visualization이 약하다는 점일 것입니다.</p>
<p>하지만, IBM에서 만든 Brunel을 이용하면 Jupyter의 Apache Toree Scala Kernel에서 Magic 키워드로 간단하게 차트들을 그릴수 있습니다.</p>
<p>관련 링크들입니다.</p>
<ul>
<li>Gtihub: <a href="https://github.com/Brunel-Visualization/Brunel">https://github.com/Brunel-Visualization/Brunel</a></li>
<li>Jupyter Brunel with Apache Toree: <a href="https://github.com/Brunel-Visualization/Brunel/tree/master/spark-kernel">https://github.com/Brunel-Visualization/Brunel/tree/master/spark-kernel</a></li>
<li>Blog글: <a href="http://blog.ibmjstart.net/2016/07/18/visualizing-big-data-spark-scala/">http://blog.ibmjstart.net/2016/07/18/visualizing-big-data-spark-scala/</a></li>
<li>Cookbook: <a href="https://github.com/Brunel-Visualization/Brunel/wiki/Brunel-Visualization-Cookbook">https://github.com/Brunel-Visualization/Brunel/wiki/Brunel-Visualization-Cookbook</a></li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>사용법은 간단하게 아래와 같이 Toree Magic 키워드로 라이브러리를 추가해주면 됩니다.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-scala"><pre><span></span><span class="o">%</span><span class="nc">AddJar</span> <span class="o">-</span><span class="n">magic</span> <span class="n">https</span><span class="o">://</span><span class="n">brunelvis</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">jar</span><span class="o">/</span><span class="n">spark</span><span class="o">-</span><span class="n">kernel</span><span class="o">-</span><span class="n">brunel</span><span class="o">-</span><span class="n">all</span><span class="o">-</span><span class="mf">2.0</span><span class="o">.</span><span class="n">jar</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Starting download from https://brunelvis.org/jar/spark-kernel-brunel-all-2.0.jar
Finished download of spark-kernel-brunel-all-2.0.jar
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>추가적으로 sample csv 파일을 읽기 위해 spark-csv package 의존성을 추가해줍니다.
이또한 간편하게 Toree Magic 키워드를 이용해 아래와 같이 해주면 됩니다.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-scala"><pre><span></span><span class="o">%</span><span class="nc">AddDeps</span> <span class="n">com</span><span class="o">.</span><span class="n">databricks</span> <span class="n">spark</span><span class="o">-</span><span class="n">csv_2</span><span class="o">.</span><span class="mi">11</span> <span class="mf">1.4</span><span class="o">.</span><span class="mi">0</span> <span class="o">--</span><span class="n">transitive</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Marking com.databricks:spark-csv_2.11:1.4.0 for download
Preparing to fetch from:
-> file:/var/folders/0h/gc62b17x2vb0fyd8px3lbln421xhr9/T/toree_add_deps2489440177304020641/
-> https://repo1.maven.org/maven2
-> New file at /var/folders/0h/gc62b17x2vb0fyd8px3lbln421xhr9/T/toree_add_deps2489440177304020641/https/repo1.maven.org/maven2/org/apache/commons/commons-csv/1.1/commons-csv-1.1.jar
-> New file at /var/folders/0h/gc62b17x2vb0fyd8px3lbln421xhr9/T/toree_add_deps2489440177304020641/https/repo1.maven.org/maven2/com/univocity/univocity-parsers/1.5.1/univocity-parsers-1.5.1.jar
-> New file at /var/folders/0h/gc62b17x2vb0fyd8px3lbln421xhr9/T/toree_add_deps2489440177304020641/https/repo1.maven.org/maven2/com/databricks/spark-csv_2.11/1.4.0/spark-csv_2.11-1.4.0.jar
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>아래의 간단한 코드를 이용해서 웹상의 csv 샘플 데이터를 다운받아 저장합니다.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-scala"><pre><span></span><span class="k">import</span> <span class="nn">scala.io.Source</span>
<span class="k">import</span> <span class="nn">java.io._</span>
<span class="k">val</span> <span class="n">html</span> <span class="k">=</span> <span class="nc">Source</span><span class="o">.</span><span class="n">fromURL</span><span class="o">(</span><span class="s">"https://raw.githubusercontent.com/Brunel-Visualization/Brunel/master/python/examples/data/cars.csv"</span><span class="o">)</span>
<span class="k">val</span> <span class="n">writer</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"cars.csv"</span><span class="o">))</span>
<span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="o">(</span><span class="n">html</span><span class="o">.</span><span class="n">mkString</span><span class="o">)</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="o">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>이제 spark-csv 패키지 라이브러리를 이용해 데이터를 읽어봅니다.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-scala"><pre><span></span><span class="k">val</span> <span class="n">dfCars</span> <span class="k">=</span> <span class="n">sqlContext</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="o">(</span><span class="s">"com.databricks.spark.csv"</span><span class="o">).</span><span class="n">option</span><span class="o">(</span><span class="s">"header"</span><span class="o">,</span> <span class="s">"true"</span><span class="o">).</span><span class="n">load</span><span class="o">(</span><span class="s">"cars.csv"</span><span class="o">)</span>
<span class="n">dfCars</span><span class="o">.</span><span class="n">show</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>+---+---------+------+----------+------+------------+----+--------+--------------------+
|mpg|cylinders|engine|horsepower|weight|acceleration|year|  origin|                name|
+---+---------+------+----------+------+------------+----+--------+--------------------+
| 18|        8|   307|       130|  3504|          12|  70|American|chevrolet chevell...|
| 15|        8|   350|       165|  3693|        11.5|  70|American|   buick skylark 320|
| 18|        8|   318|       150|  3436|          11|  70|American|  plymouth satellite|
+---+---------+------+----------+------+------------+----+--------+--------------------+
only showing top 3 rows

</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>이제 Brunel을 이용해서 데이터를 시각화 해보겠습니다.
상당히 직관적인 문법으로 데이터의 시각화가 가능합니다.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-scala"><pre><span></span><span class="o">%%</span><span class="nc">Brunel</span>
<span class="n">data</span><span class="o">(</span><span class=" -Symbol">'dfCars</span><span class="err">'</span><span class="o">)</span> <span class="n">x</span><span class="o">(</span><span class="n">origin</span><span class="o">)</span> <span class="n">y</span><span class="o">(</span><span class="n">horsepower</span><span class="o">)</span> <span class="n">mean</span><span class="o">(</span><span class="n">horsepower</span><span class="o">)</span> <span class="n">bar</span> <span class="n">tooltip</span><span class="o">(</span><span class="k">#</span><span class="n">all</span><span class="o">)</span> <span class="o">::</span> <span class="n">width</span><span class="k">=</span><span class="mi">300</span><span class="o">,</span> <span class="n">height</span><span class="k">=</span><span class="mi">300</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[6]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<link charset="utf-8" href="https://brunelvis.org/js/brunel.2.0.css" rel="stylesheet" type="text/css">
<link charset="utf-8" href="https://brunelvis.org/js/sumoselect.css" rel="stylesheet" type="text/css">
<style> </style>
<div class="brunel" id="controlsId811418e7-6851-4b1e-a28c-4f7821624a7e"></div>
<svg height="300" id="viside3b8ecea-f5a1-426f-863c-a49592d3adf6" width="300"></svg>
<script>
require.config({
            waitSeconds: 60,
            paths: {
                'd3': '//cdnjs.cloudflare.com/ajax/libs/d3/4.2.1/d3.min',
                'topojson' : '//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.20/topojson.min',
                'brunel' : 'https://brunelvis.org/js/brunel.2.0.min',
                'brunelControls' : 'https://brunelvis.org/js/brunel.controls.2.0.min'
            },

            shim: {
               'brunel' : {
                    exports: 'BrunelD3',
                    deps: ['d3', 'topojson'],
                    init: function() {
                       return {
                         BrunelD3 : BrunelD3,
                         BrunelData : BrunelData
                      }
                    }
                },
               'brunelControls' : {
                    exports: 'BrunelEventHandlers',
                    init: function() {
                       return {
                         BrunelEventHandlers: BrunelEventHandlers,
                         BrunelJQueryControlFactory: BrunelJQueryControlFactory
                      }
                    }
                }

            }

        });

        require(["d3"], function(d3) {
        require(["brunel", "brunelControls"], function(brunel, brunelControls) {

            function  BrunelVis(visId) {
  "use strict"; // Strict Mode
  var datasets = [],                               // Array of datasets for the original data
      pre = function(d, i) { return d },           // Default pre-process does nothing
      post = function(d, i) { return d },          // Default post-process does nothing
      transitionTime = 200,                        // Transition time for animations
      charts = [],                                 // The charts in the system
      hasData = function(d) {return d && (d.row != null || hasData(d.data))}, // Filters to data items
      vis = d3.select('#' + visId).attr('class', 'brunel');  // the SVG container

  // Define chart #1 in the visualization //////////////////////////////////////////////////////////

  charts[0] = function(parentNode, filterRows) {
    var geom = BrunelD3.geometry(parentNode || vis.node(), 0, 0, 1, 1, 5, 46, 39, 0),
      elements = [];                               // Array of elements in this chart

    // Define groups for the chart parts ///////////////////////////////////////////////////////////

    var chart =  vis.append('g').attr('class', 'chart1')
      .attr('transform','translate(' + geom.chart_left + ',' + geom.chart_top + ')');
    var overlay = chart.append('g').attr('class', 'element')
      .attr('class', 'overlay').style('cursor','move').style('fill','none').style('pointer-events','all');
    var zoom = d3.zoom().scaleExtent([1/3,3]);
    var zoomNode = overlay.append('rect').attr('class', 'overlay')
      .attr('x', geom.inner_left).attr('y', geom.inner_top)
      .attr('width', geom.inner_rawWidth).attr('height', geom.inner_rawHeight)
      .node();
    zoomNode.__zoom = d3.zoomIdentity;
    chart.append('rect').attr('class', 'background').attr('width', geom.chart_right-geom.chart_left).attr('height', geom.chart_bottom-geom.chart_top);
    var interior = chart.append('g').attr('class', 'interior')
      .attr('transform','translate(' + geom.inner_left + ',' + geom.inner_top + ')')
      .attr('clip-path', 'url(#clip_viside3b8ecea-f5a1-426f-863c-a49592d3adf6_chart1_inner)');
    interior.append('rect').attr('class', 'inner').attr('width', geom.inner_width).attr('height', geom.inner_height);
    var gridGroup = interior.append('g').attr('class', 'grid');
    var axes = chart.append('g').attr('class', 'axis')
      .attr('transform','translate(' + geom.inner_left + ',' + geom.inner_top + ')');
    vis.append('clipPath').attr('id', 'clip_viside3b8ecea-f5a1-426f-863c-a49592d3adf6_chart1_inner').append('rect')
      .attr('x', 0).attr('y', 0)
      .attr('width', geom.inner_rawWidth+1).attr('height', geom.inner_rawHeight+1);

    // Scales //////////////////////////////////////////////////////////////////////////////////////

    var scale_x = d3.scalePoint().padding(0.5)
      .domain(['American', 'European', 'Japanese'])
      .range([0, geom.inner_width]);
    var scale_inner = d3.scaleLinear().domain([0,1])
      .range([-0.5, 0.5]);
    var scale_y = d3.scalePoint().padding(0.5)
      .domain(['71', '67', '150'])
      .range([geom.inner_height, 0]);
    var base_scales = [scale_x, scale_y];          // Untransformed original scales

    // Axes ////////////////////////////////////////////////////////////////////////////////////////

    axes.append('g').attr('class', 'x axis')
      .attr('transform','translate(0,' + geom.inner_rawHeight + ')')
      .attr('clip-path', 'url(#clip_viside3b8ecea-f5a1-426f-863c-a49592d3adf6_chart1_haxis)');
    vis.append('clipPath').attr('id', 'clip_viside3b8ecea-f5a1-426f-863c-a49592d3adf6_chart1_haxis').append('polyline')
      .attr('points', '-1,-1000, -1,-1 -5,5, -1000,5, -100,1000, 10000,1000 10000,-1000');
    axes.select('g.axis.x').append('text').attr('class', 'title').text('origin').style('text-anchor', 'middle')
      .attr('x',geom.inner_rawWidth/2)
      .attr('y', geom.inner_bottom - 2.0).attr('dy','-0.27em');
    axes.append('g').attr('class', 'y axis')
      .attr('clip-path', 'url(#clip_viside3b8ecea-f5a1-426f-863c-a49592d3adf6_chart1_vaxis)');
    vis.append('clipPath').attr('id', 'clip_viside3b8ecea-f5a1-426f-863c-a49592d3adf6_chart1_vaxis').append('polyline')
      .attr('points', '-1000,-10000, 10000,-10000, 10000,' + (geom.inner_rawHeight+1) + ', -1,' + (geom.inner_rawHeight+1) + ', -1,' + (geom.inner_rawHeight+5) + ', -1000,' + (geom.inner_rawHeight+5) );
    axes.select('g.axis.y').append('text').attr('class', 'title').text('Mode(horsepower)').style('text-anchor', 'middle')
      .attr('x',-geom.inner_rawHeight/2)
      .attr('y', 4-geom.inner_left).attr('dy', '0.7em').attr('transform', 'rotate(270)');

    var axis_bottom = d3.axisBottom(scale_x).tickSizeInner(3).tickPadding(3).tickSizeOuter(0)
      .ticks(Math.min(10, Math.round(geom.inner_width / 87.0)));
    var axis_left = d3.axisLeft(scale_y).tickSizeInner(3).tickPadding(3).tickSizeOuter(0);

    function buildAxes(time) {
      axis_bottom.tickValues(BrunelD3.filterTicks(scale_x))
      var axis_x = axes.select('g.axis.x');
      BrunelD3.transition(axis_x, time).call(axis_bottom.scale(scale_x));
      axis_left.tickValues(BrunelD3.filterTicks(scale_y))
      var axis_y = axes.select('g.axis.y');
      BrunelD3.transition(axis_y, time).call(axis_left.scale(scale_y));
    }
    zoom.on('zoom', function(t, time) {
        t = t ||BrunelD3.restrictZoom(d3.event.transform, geom, this);
        zoomNode.__zoom = t;
        build(time || -1);
    });

    // Define element #1 ///////////////////////////////////////////////////////////////////////////

    elements[0] = function() {
      var original, processed,           // data sets passed in and then transformed
        element, data,                   // Brunel element information and brunel data
        selection, merged;               // D3 selection and merged selection
      var elementGroup = interior.append('g').attr('class', 'element1'),
        main = elementGroup.append('g').attr('class', 'main'),
        labels = BrunelD3.undoTransform(elementGroup.append('g').attr('class', 'labels').attr('aria-hidden', 'true'), elementGroup);

      function makeData() {
        original = datasets[0];
        if (filterRows) original = original.retainRows(filterRows);
        processed = pre(original, 0)
          .summarize('horsepower=horsepower:mean; origin=origin:base');
        processed = post(processed, 0);
        var f0 = processed.field('origin'),
          f1 = processed.field('horsepower'),
          f2 = processed.field('#row'),
          f3 = processed.field('#selection');
        var keyFunc = function(d) { return f0.value(d) };
        data = {
          origin:       function(d) { return f0.value(d.row) },
          horsepower:   function(d) { return f1.value(d.row) },
          $row:         function(d) { return f2.value(d.row) },
          $selection:   function(d) { return f3.value(d.row) },
          origin_f:     function(d) { return f0.valueFormatted(d.row) },
          horsepower_f: function(d) { return f1.valueFormatted(d.row) },
          $row_f:       function(d) { return f2.valueFormatted(d.row) },
          $selection_f: function(d) { return f3.valueFormatted(d.row) },
          _split:       function(d) { return 'ALL' },
          _key:         keyFunc,
          _rows:        BrunelD3.makeRowsWithKeys(keyFunc, processed.rowCount())
        };
      }

      // Build element from data ///////////////////////////////////////////////////////////////////

      function build(transitionMillis) {
        element = elements[0];
        var w = 0.9 * Math.abs(scale_x(scale_x.domain()[1]) - scale_x(scale_x.domain()[0]) );
        var x = function(d) { return scale_x(data.origin(d))};
        var h = 0.9 * Math.abs(scale_y(scale_y.domain()[1]) - scale_y(scale_y.domain()[0]) );
        var y1 = scale_y.range()[0];
        var y2 = function(d) { return scale_y(data.horsepower(d))};
        selection = main.selectAll('.element').data(data._rows, function(d) { return d.key});
        var added = selection.enter().append('rect')
          .attr('class', 'element bar filled');

        merged = selection.merge(added);
        merged.filter(hasData).classed('selected', function(d) { return data.$selection(d) == '✓' });
        BrunelD3.transition(merged, transitionMillis)
          .each(function(d) {
            var width = w, left = x(d) - width/2, 
            c = y1, d = y2(d), top = Math.min(c,d), height = Math.max(1e-6, Math.abs(c-d));
            this.r = {x:left, y:top, w:width, h:height};
          })
          .attr('x', function(d) { return this.r.x })
          .attr('y', function(d) { return this.r.y })
          .attr('width', function(d) { return this.r.w })
          .attr('height', function(d) { return this.r.h });

        var tooltipLabeling = {
          method: 'box', location: ['center', 'top'], inside: true, align: 'middle', pad: 0, dy: 0.7,
          fit: true, granularity: 0,
          content: function(d) {
            return d.row == null ? null : '<span class="title">origin: </span>'
			+ '<span class="field">' + data.origin_f(d) + '</span>'
			+ '<br/>'
			+ '<span class="title">Mode(horsepower): </span>'
			+ '<span class="field">' + data.horsepower_f(d) + '</span>'
          }
        };
        BrunelD3.addTooltip(merged, tooltipLabeling, geom);

        BrunelD3.transition(selection.exit(), transitionMillis/3)
          .style('opacity', 0.5).each( function() {
            this.remove(); if (this.__label__) this.__label__.remove()
        });
      }

      return {
        data:           function() { return processed },
        original:       function() { return original },
        internal:       function() { return data },
        selection:      function() { return merged },
        makeData:       makeData,
        build:          build,
        chart:          function() { return charts[0] },
        group:          function() { return elementGroup },
        fields: {
          x:            ['origin'],
          y:            ['horsepower'],
          key:          ['origin']
        }
      };
    }();

    function build(time, noData) {
      var first = elements[0].data() == null;
      if (first) time = 0; // No transition for first call
      buildAxes(time);
      if ((first || time > -1) && !noData)elements[0].makeData();
      elements[0].build(time);
    }

    // Expose the following components of the chart
    return {
      elements : elements,
      interior : interior,
      scales: {x:scale_x, y:scale_y},
      zoom: function(params, time) {
          if (params) zoom.on('zoom').call(zoomNode, params, time);
          return d3.zoomTransform(zoomNode);
      },
      build : build
    };
    }();

  function setData(rowData, i) { datasets[i||0] = BrunelD3.makeData(rowData) }
  function updateAll(time) { charts.forEach(function(x) {x.build(time || 0)}) }
  function buildAll() {
    for (var i=0;i<arguments.length;i++) setData(arguments[i], i);
    updateAll(transitionTime);
  }

  return {
    dataPreProcess:     function(f) { if (f) pre = f; return pre },
    dataPostProcess:    function(f) { if (f) post = f; return post },
    data:               function(d,i) { if (d) setData(d,i); return datasets[i||0] },
    visId:              visId,
    build:              buildAll,
    rebuild:            updateAll,
    charts:             charts
  }
}

// Data Tables /////////////////////////////////////////////////////////////////////////////////////

var table1 = {
   names: ['origin', 'horsepower'], 
   options: ['string', 'string'], 
   rows: [['American', '130'], ['American', '165'], ['American', '150'], ['American', '150'],
  ['American', '140'], ['American', '198'], ['American', '220'], ['American', '215'],
  ['American', '225'], ['American', '190'], ['American', '165'], ['American', '153'],
  ['American', '175'], ['American', '175'], ['American', '170'], ['American', '160'],
  ['American', '140'], ['American', '150'], ['American', '225'], ['American', '95'],
  ['American', '97'], ['American', '85'], ['American', '90'], ['American', '215'],
  ['American', '200'], ['American', '210'], ['American', '193'], ['American', '90'],
  ['American', 'nan'], ['American', '100'], ['American', '105'], ['American', '100'],
  ['American', '88'], ['American', '100'], ['American', '165'], ['American', '175'],
  ['American', '153'], ['American', '150'], ['American', '180'], ['American', '170'],
  ['American', '175'], ['American', '110'], ['American', '72'], ['American', '100'],
  ['American', '88'], ['American', '86'], ['American', '70'], ['American', '80'], ['American', '90'],
  ['American', '86'], ['American', '165'], ['American', '175'], ['American', '150'],
  ['American', '153'], ['American', '150'], ['American', '208'], ['American', '155'],
  ['American', '160'], ['American', '190'], ['American', '150'], ['American', '130'],
  ['American', '140'], ['American', '150'], ['American', '86'], ['American', '80'],
  ['American', '175'], ['American', '150'], ['American', '145'], ['American', '137'],
  ['American', '150'], ['American', '198'], ['American', '150'], ['American', '158'],
  ['American', '150'], ['American', '215'], ['American', '225'], ['American', '175'],
  ['American', '105'], ['American', '100'], ['American', '100'], ['American', '88'],
  ['American', '95'], ['American', '150'], ['American', '167'], ['American', '170'],
  ['American', '180'], ['American', '100'], ['American', '72'], ['American', '85'],
  ['American', '107'], ['American', '145'], ['American', '230'], ['American', '150'],
  ['American', '180'], ['American', '95'], ['American', 'nan'], ['American', '100'],
  ['American', '100'], ['American', '80'], ['American', '75'], ['American', '100'],
  ['American', '110'], ['American', '105'], ['American', '140'], ['American', '150'],
  ['American', '150'], ['American', '140'], ['American', '150'], ['American', '75'],
  ['American', '95'], ['American', '105'], ['American', '72'], ['American', '72'],
  ['American', '170'], ['American', '145'], ['American', '150'], ['American', '148'],
  ['American', '110'], ['American', '105'], ['American', '110'], ['American', '95'],
  ['American', '110'], ['American', '110'], ['American', '129'], ['American', '83'],
  ['American', '100'], ['American', '78'], ['American', '97'], ['American', '90'],
  ['American', '92'], ['American', '79'], ['American', '140'], ['American', '150'],
  ['American', '120'], ['American', '152'], ['American', '100'], ['American', '105'],
  ['American', '81'], ['American', '90'], ['American', '52'], ['American', '60'],
  ['American', '100'], ['American', '78'], ['American', '110'], ['American', '95'],
  ['American', '72'], ['American', '150'], ['American', '180'], ['American', '145'],
  ['American', '130'], ['American', '150'], ['American', '80'], ['American', '96'],
  ['American', '145'], ['American', '110'], ['American', '145'], ['American', '130'],
  ['American', '110'], ['American', '105'], ['American', '100'], ['American', '98'],
  ['American', '180'], ['American', '170'], ['American', '190'], ['American', '149'],
  ['American', '88'], ['American', '89'], ['American', '63'], ['American', '83'], ['American', '66'],
  ['American', '110'], ['American', '140'], ['American', '139'], ['American', '105'],
  ['American', '95'], ['American', '85'], ['American', '88'], ['American', '100'],
  ['American', '90'], ['American', '105'], ['American', '85'], ['American', '110'],
  ['American', '120'], ['American', '145'], ['American', '165'], ['American', '139'],
  ['American', '140'], ['American', '68'], ['American', '75'], ['American', '105'],
  ['American', '85'], ['American', '115'], ['American', '85'], ['American', '88'],
  ['American', '90'], ['American', '110'], ['American', '130'], ['American', '129'],
  ['American', '138'], ['American', '135'], ['American', '155'], ['American', '142'],
  ['American', '125'], ['American', '150'], ['American', '80'], ['American', '80'],
  ['American', '125'], ['American', '90'], ['American', '70'], ['American', '70'],
  ['American', '90'], ['American', '115'], ['American', '115'], ['American', '90'],
  ['American', '70'], ['American', '90'], ['American', '88'], ['American', '90'], ['American', '90'],
  ['American', '105'], ['American', 'nan'], ['American', '84'], ['American', '84'],
  ['American', '92'], ['American', '110'], ['American', '84'], ['American', '64'],
  ['American', '63'], ['American', '65'], ['American', '65'], ['American', '110'],
  ['American', '105'], ['American', '88'], ['American', '85'], ['American', '88'],
  ['American', '88'], ['American', '88'], ['American', '85'], ['American', '84'], ['American', '90'],
  ['American', '92'], ['American', 'nan'], ['American', '63'], ['American', '70'],
  ['American', '110'], ['American', '85'], ['American', '92'], ['American', '112'],
  ['American', '84'], ['American', '90'], ['American', '86'], ['American', '84'], ['American', '79'],
  ['American', '82'], ['European', '115'], ['European', '46'], ['European', '87'],
  ['European', '90'], ['European', '95'], ['European', '113'], ['European', '48'],
  ['European', '90'], ['European', '70'], ['European', '76'], ['European', '60'], ['European', '54'],
  ['European', '112'], ['European', '76'], ['European', '87'], ['European', '69'],
  ['European', '46'], ['European', '90'], ['European', '49'], ['European', '75'], ['European', '91'],
  ['European', '112'], ['European', '110'], ['European', '83'], ['European', '67'],
  ['European', '78'], ['European', '75'], ['European', '75'], ['European', '67'], ['European', '71'],
  ['European', '70'], ['European', '95'], ['European', '88'], ['European', '98'],
  ['European', '115'], ['European', '86'], ['European', '81'], ['European', '83'],
  ['European', '70'], ['European', '71'], ['European', '102'], ['European', '88'],
  ['European', '120'], ['European', '58'], ['European', '78'], ['European', '78'],
  ['European', '110'], ['European', '48'], ['European', '103'], ['European', '125'],
  ['European', '115'], ['European', '133'], ['European', '71'], ['European', '71'],
  ['European', '77'], ['European', '71'], ['European', '69'], ['European', '76'], ['European', '78'],
  ['European', '48'], ['European', '48'], ['European', '67'], ['European', '67'],
  ['European', 'nan'], ['European', '62'], ['European', '88'], ['European', '74'],
  ['European', 'nan'], ['European', '80'], ['European', '110'], ['European', '76'],
  ['European', '74'], ['European', '52'], ['Japanese', '95'], ['Japanese', '88'], ['Japanese', '88'],
  ['Japanese', '95'], ['Japanese', '65'], ['Japanese', '69'], ['Japanese', '95'], ['Japanese', '97'],
  ['Japanese', '92'], ['Japanese', '97'], ['Japanese', '88'], ['Japanese', '88'], ['Japanese', '94'],
  ['Japanese', '90'], ['Japanese', '122'], ['Japanese', '67'], ['Japanese', '65'],
  ['Japanese', '52'], ['Japanese', '61'], ['Japanese', '97'], ['Japanese', '93'], ['Japanese', '75'],
  ['Japanese', '96'], ['Japanese', '97'], ['Japanese', '53'], ['Japanese', '53'], ['Japanese', '70'],
  ['Japanese', '75'], ['Japanese', '108'], ['Japanese', '68'], ['Japanese', '70'],
  ['Japanese', '75'], ['Japanese', '67'], ['Japanese', '97'], ['Japanese', '110'],
  ['Japanese', '52'], ['Japanese', '70'], ['Japanese', '60'], ['Japanese', '95'], ['Japanese', '97'],
  ['Japanese', '95'], ['Japanese', '97'], ['Japanese', '68'], ['Japanese', '65'], ['Japanese', '65'],
  ['Japanese', '60'], ['Japanese', '65'], ['Japanese', '90'], ['Japanese', '75'], ['Japanese', '92'],
  ['Japanese', '75'], ['Japanese', '65'], ['Japanese', '65'], ['Japanese', '67'], ['Japanese', '67'],
  ['Japanese', '132'], ['Japanese', '100'], ['Japanese', '72'], ['Japanese', '58'],
  ['Japanese', '60'], ['Japanese', '67'], ['Japanese', '65'], ['Japanese', '62'], ['Japanese', '68'],
  ['Japanese', '75'], ['Japanese', '75'], ['Japanese', '100'], ['Japanese', '74'],
  ['Japanese', '116'], ['Japanese', '120'], ['Japanese', '68'], ['Japanese', '68'],
  ['Japanese', '88'], ['Japanese', '75'], ['Japanese', '70'], ['Japanese', '67'], ['Japanese', '67'],
  ['Japanese', '67'], ['Japanese', '96']]
};

// Call Code to Build the system ///////////////////////////////////////////////////////////////////

var v = new BrunelVis('viside3b8ecea-f5a1-426f-863c-a49592d3adf6');
v.build(table1);

            ""
        });
        });
        </script>
</link></link></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-scala"><pre><span></span><span class="o">%%</span><span class="nc">Brunel</span>
<span class="n">data</span><span class="o">(</span><span class=" -Symbol">'dfCars</span><span class="err">'</span><span class="o">)</span> <span class="n">point</span> <span class="n">x</span><span class="o">(</span><span class="n">horsepower</span><span class="o">)</span> <span class="n">y</span><span class="o">(</span><span class="n">weight</span><span class="o">)</span> <span class="o">::</span> <span class="n">width</span><span class="k">=</span><span class="mi">300</span><span class="o">,</span> <span class="n">height</span><span class="k">=</span><span class="mi">300</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[7]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<link charset="utf-8" href="https://brunelvis.org/js/brunel.2.0.css" rel="stylesheet" type="text/css">
<link charset="utf-8" href="https://brunelvis.org/js/sumoselect.css" rel="stylesheet" type="text/css">
<style> </style>
<div class="brunel" id="controlsId8d177fa0-e261-4961-a555-92dd1381fb76"></div>
<svg height="300" id="visidc3a76aed-cd8b-49e1-9e6c-a226526b4da6" width="300"></svg>
<script>
require.config({
            waitSeconds: 60,
            paths: {
                'd3': '//cdnjs.cloudflare.com/ajax/libs/d3/4.2.1/d3.min',
                'topojson' : '//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.20/topojson.min',
                'brunel' : 'https://brunelvis.org/js/brunel.2.0.min',
                'brunelControls' : 'https://brunelvis.org/js/brunel.controls.2.0.min'
            },

            shim: {
               'brunel' : {
                    exports: 'BrunelD3',
                    deps: ['d3', 'topojson'],
                    init: function() {
                       return {
                         BrunelD3 : BrunelD3,
                         BrunelData : BrunelData
                      }
                    }
                },
               'brunelControls' : {
                    exports: 'BrunelEventHandlers',
                    init: function() {
                       return {
                         BrunelEventHandlers: BrunelEventHandlers,
                         BrunelJQueryControlFactory: BrunelJQueryControlFactory
                      }
                    }
                }

            }

        });

        require(["d3"], function(d3) {
        require(["brunel", "brunelControls"], function(brunel, brunelControls) {

            function  BrunelVis(visId) {
  "use strict"; // Strict Mode
  var datasets = [],                               // Array of datasets for the original data
      pre = function(d, i) { return d },           // Default pre-process does nothing
      post = function(d, i) { return d },          // Default post-process does nothing
      transitionTime = 200,                        // Transition time for animations
      charts = [],                                 // The charts in the system
      hasData = function(d) {return d && (d.row != null || hasData(d.data))}, // Filters to data items
      vis = d3.select('#' + visId).attr('class', 'brunel');  // the SVG container

  // Define chart #1 in the visualization //////////////////////////////////////////////////////////

  charts[0] = function(parentNode, filterRows) {
    var geom = BrunelD3.geometry(parentNode || vis.node(), 0, 0, 1, 1, 5, 53, 54, 9),
      elements = [];                               // Array of elements in this chart

    // Define groups for the chart parts ///////////////////////////////////////////////////////////

    var chart =  vis.append('g').attr('class', 'chart1')
      .attr('transform','translate(' + geom.chart_left + ',' + geom.chart_top + ')');
    var overlay = chart.append('g').attr('class', 'element')
      .attr('class', 'overlay').style('cursor','move').style('fill','none').style('pointer-events','all');
    var zoom = d3.zoom().scaleExtent([1/3,3]);
    var zoomNode = overlay.append('rect').attr('class', 'overlay')
      .attr('x', geom.inner_left).attr('y', geom.inner_top)
      .attr('width', geom.inner_rawWidth).attr('height', geom.inner_rawHeight)
      .node();
    zoomNode.__zoom = d3.zoomIdentity;
    chart.append('rect').attr('class', 'background').attr('width', geom.chart_right-geom.chart_left).attr('height', geom.chart_bottom-geom.chart_top);
    var interior = chart.append('g').attr('class', 'interior')
      .attr('transform','translate(' + geom.inner_left + ',' + geom.inner_top + ')')
      .attr('clip-path', 'url(#clip_visidc3a76aed-cd8b-49e1-9e6c-a226526b4da6_chart1_inner)');
    interior.append('rect').attr('class', 'inner').attr('width', geom.inner_width).attr('height', geom.inner_height);
    var gridGroup = interior.append('g').attr('class', 'grid');
    var axes = chart.append('g').attr('class', 'axis')
      .attr('transform','translate(' + geom.inner_left + ',' + geom.inner_top + ')');
    vis.append('clipPath').attr('id', 'clip_visidc3a76aed-cd8b-49e1-9e6c-a226526b4da6_chart1_inner').append('rect')
      .attr('x', 0).attr('y', 0)
      .attr('width', geom.inner_rawWidth+1).attr('height', geom.inner_rawHeight+1);

    // Scales //////////////////////////////////////////////////////////////////////////////////////

    var scale_x = d3.scalePoint().padding(0.5)
      .domain(['100', '102', '103', '105', '107', '108', '110', '112', '113', '115', '116', '120', '122', '125', '129', '130', '132', '133', '135', '137', '138', '139', '140', '142', '145', '148', '149', '150', '152', '153', '155', '158', '160', '165', '167', '170', '175', '180', '190', '193', '198', '200', '208', '210', '215', '220', '225', '230', '46', '48', '49', '52', '53', '54', '58', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '70', '71', '72', '74', '75', '76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', '91', '92', '93', '94', '95', '96', '97', '98', 'nan'])
      .range([0, geom.inner_width]);
    var scale_inner = d3.scaleLinear().domain([0,1])
      .range([-0.5, 0.5]);
    var scale_y = d3.scalePoint().padding(0.5)
      .domain(['5140', '4997', '4955', '4952', '4951', '4906', '4746', '4735', '4732', '4699', '4668', '4657', '4654', '4638', '4633', '4615', '4502', '4499', '4498', '4464', '4457', '4456', '4440', '4425', '4422', '4385', '4382', '4380', '4376', '4363', '4360', '4354', '4341', '4335', '4325', '4312', '4295', '4294', '4278', '4274', '4257', '4237', '4220', '4215', '4209', '4190', '4166', '4165', '4154', '4142', '4141', '4140', '4135', '4129', '4100', '4098', '4096', '4082', '4080', '4077', '4060', '4055', '4054', '4042', '4034', '3988', '3962', '3955', '3940', '3907', '3900', '3897', '3892', '3880', '3870', '3850', '3840', '3830', '3821', '3820', '3785', '3781', '3777', '3761', '3755', '3735', '3730', '3725', '3693', '3672', '3664', '3651', '3645', '3632', '3630', '3620', '3613', '3609', '3605', '3574', '3570', '3563', '3535', '3530', '3525', '3520', '3504', '3465', '3459', '3449', '3445', '3439', '3436', '3433', '3432', '3430', '3425', '3420', '3415', '3410', '3399', '3381', '3380', '3365', '3360', '3353', '3336', '3329', '3302', '3288', '3282', '3278', '3270', '3265', '3264', '3250', '3245', '3233', '3230', '3221', '3211', '3210', '3205', '3193', '3190', '3169', '3160', '3158', '3155', '3150', '3140', '3139', '3121', '3102', '3090', '3086', '3085', '3070', '3060', '3039', '3035', '3021', '3015', '3012', '3003', '2990', '2984', '2979', '2965', '2962', '2957', '2950', '2945', '2933', '2930', '2914', '2910', '2905', '2904', '2901', '2900', '2890', '2875', '2870', '2868', '2865', '2855', '2835', '2833', '2830', '2815', '2807', '2800', '2795', '2790', '2789', '2774', '2755', '2745', '2740', '2735', '2725', '2720', '2711', '2702', '2700', '2694', '2678', '2672', '2671', '2670', '2665', '2660', '2648', '2640', '2639', '2635', '2634', '2625', '2620', '2615', '2605', '2600', '2595', '2592', '2587', '2585', '2582', '2575', '2572', '2565', '2560', '2556', '2545', '2542', '2525', '2515', '2511', '2506', '2500', '2490', '2489', '2472', '2464', '2451', '2434', '2430', '2420', '2408', '2405', '2401', '2395', '2391', '2385', '2380', '2379', '2375', '2372', '2370', '2350', '2335', '2330', '2320', '2310', '2300', '2295', '2290', '2288', '2279', '2278', '2265', '2264', '2255', '2254', '2246', '2245', '2234', '2230', '2228', '2226', '2223', '2220', '2219', '2215', '2210', '2205', '2202', '2200', '2190', '2189', '2188', '2171', '2164', '2160', '2158', '2155', '2150', '2145', '2144', '2135', '2130', '2126', '2125', '2124', '2123', '2120', '2110', '2108', '2100', '2085', '2075', '2074', '2070', '2065', '2051', '2050', '2046', '2045', '2035', '2025', '2020', '2019', '2003', '2000', '1995', '1990', '1985', '1980', '1978', '1975', '1970', '1968', '1965', '1963', '1955', '1950', '1945', '1940', '1937', '1925', '1915', '1875', '1867', '1850', '1845', '1836', '1835', '1834', '1825', '1800', '1795', '1773', '1760', '1755', '1649', '1613'])
      .range([geom.inner_height, 0]);
    var base_scales = [scale_x, scale_y];          // Untransformed original scales

    // Axes ////////////////////////////////////////////////////////////////////////////////////////

    axes.append('g').attr('class', 'x axis')
      .attr('transform','translate(0,' + geom.inner_rawHeight + ')')
      .attr('clip-path', 'url(#clip_visidc3a76aed-cd8b-49e1-9e6c-a226526b4da6_chart1_haxis)');
    vis.append('clipPath').attr('id', 'clip_visidc3a76aed-cd8b-49e1-9e6c-a226526b4da6_chart1_haxis').append('polyline')
      .attr('points', '-1,-1000, -1,-1 -5,5, -1000,5, -100,1000, 10000,1000 10000,-1000');
    axes.select('g.axis.x').append('text').attr('class', 'title').text('horsepower').style('text-anchor', 'middle')
      .attr('x',geom.inner_rawWidth/2)
      .attr('y', geom.inner_bottom - 2.0).attr('dy','-0.27em');
    axes.append('g').attr('class', 'y axis')
      .attr('clip-path', 'url(#clip_visidc3a76aed-cd8b-49e1-9e6c-a226526b4da6_chart1_vaxis)');
    vis.append('clipPath').attr('id', 'clip_visidc3a76aed-cd8b-49e1-9e6c-a226526b4da6_chart1_vaxis').append('polyline')
      .attr('points', '-1000,-10000, 10000,-10000, 10000,' + (geom.inner_rawHeight+1) + ', -1,' + (geom.inner_rawHeight+1) + ', -1,' + (geom.inner_rawHeight+5) + ', -1000,' + (geom.inner_rawHeight+5) );
    axes.select('g.axis.y').append('text').attr('class', 'title').text('weight').style('text-anchor', 'middle')
      .attr('x',-geom.inner_rawHeight/2)
      .attr('y', 4-geom.inner_left).attr('dy', '0.7em').attr('transform', 'rotate(270)');

    var axis_bottom = d3.axisBottom(scale_x).tickSizeInner(3).tickPadding(3).tickSizeOuter(0)
      .ticks(Math.min(10, Math.round(geom.inner_width / 37.5)));
    var axis_left = d3.axisLeft(scale_y).tickSizeInner(3).tickPadding(3).tickSizeOuter(0);

    function buildAxes(time) {
      axis_bottom.tickValues(BrunelD3.filterTicks(scale_x))
      var axis_x = axes.select('g.axis.x');
      BrunelD3.transition(axis_x, time).call(axis_bottom.scale(scale_x)).selectAll('.tick text')
        .attr('transform', function() {
          var v = this.getComputedTextLength() / Math.sqrt(2)/2;
          return 'translate(-' + (v+6) + ',' + v + ') rotate(-45)'
      });
      axis_left.tickValues(BrunelD3.filterTicks(scale_y))
      var axis_y = axes.select('g.axis.y');
      BrunelD3.transition(axis_y, time).call(axis_left.scale(scale_y));
    }
    zoom.on('zoom', function(t, time) {
        t = t ||BrunelD3.restrictZoom(d3.event.transform, geom, this);
        zoomNode.__zoom = t;
        build(time || -1);
    });

    // Define element #1 ///////////////////////////////////////////////////////////////////////////

    elements[0] = function() {
      var original, processed,           // data sets passed in and then transformed
        element, data,                   // Brunel element information and brunel data
        selection, merged;               // D3 selection and merged selection
      var elementGroup = interior.append('g').attr('class', 'element1'),
        main = elementGroup.append('g').attr('class', 'main'),
        labels = BrunelD3.undoTransform(elementGroup.append('g').attr('class', 'labels').attr('aria-hidden', 'true'), elementGroup);

      function makeData() {
        original = datasets[0];
        if (filterRows) original = original.retainRows(filterRows);
        processed = pre(original, 0);
        processed = post(processed, 0);
        var f0 = processed.field('horsepower'),
          f1 = processed.field('weight'),
          f2 = processed.field('#row'),
          f3 = processed.field('#selection');
        var keyFunc = function(d) { return f2.value(d) };
        data = {
          horsepower:   function(d) { return f0.value(d.row) },
          weight:       function(d) { return f1.value(d.row) },
          $row:         function(d) { return f2.value(d.row) },
          $selection:   function(d) { return f3.value(d.row) },
          horsepower_f: function(d) { return f0.valueFormatted(d.row) },
          weight_f:     function(d) { return f1.valueFormatted(d.row) },
          $row_f:       function(d) { return f2.valueFormatted(d.row) },
          $selection_f: function(d) { return f3.valueFormatted(d.row) },
          _split:       function(d) { return 'ALL' },
          _key:         keyFunc,
          _rows:        BrunelD3.makeRowsWithKeys(keyFunc, processed.rowCount())
        };
      }

      // Build element from data ///////////////////////////////////////////////////////////////////

      function build(transitionMillis) {
        element = elements[0];
        var w = 0.9 * Math.abs(scale_x(scale_x.domain()[1]) - scale_x(scale_x.domain()[0]) );
        var x = function(d) { return scale_x(data.horsepower(d))};
        var h = 0.9 * Math.abs(scale_y(scale_y.domain()[1]) - scale_y(scale_y.domain()[0]) );
        var y = function(d) { return scale_y(data.weight(d))};
        selection = main.selectAll('.element').data(data._rows, function(d) { return d.key});
        var added = selection.enter().append('rect')
          .attr('class', 'element point filled')
          .style('pointer-events', 'none');

        merged = selection.merge(added);
        merged.filter(hasData).classed('selected', function(d) { return data.$selection(d) == '✓' });
        BrunelD3.transition(merged, transitionMillis)
          .each(function(d) {
            var width = w, left = x(d) - width/2, 
            height = h, top = y(d) - height/2;
            this.r = {x:left, y:top, w:width, h:height};
          })
          .attr('x', function(d) { return this.r.x })
          .attr('y', function(d) { return this.r.y })
          .attr('width', function(d) { return this.r.w })
          .attr('height', function(d) { return this.r.h });

        BrunelD3.transition(selection.exit(), transitionMillis/3)
          .style('opacity', 0.5).each( function() {
            this.remove(); if (this.__label__) this.__label__.remove()
        });
      }

      return {
        data:           function() { return processed },
        original:       function() { return original },
        internal:       function() { return data },
        selection:      function() { return merged },
        makeData:       makeData,
        build:          build,
        chart:          function() { return charts[0] },
        group:          function() { return elementGroup },
        fields: {
          x:            ['horsepower'],
          y:            ['weight'],
          key:          ['#row']
        }
      };
    }();

    function build(time, noData) {
      var first = elements[0].data() == null;
      if (first) time = 0; // No transition for first call
      buildAxes(time);
      if ((first || time > -1) && !noData)elements[0].makeData();
      elements[0].build(time);
    }

    // Expose the following components of the chart
    return {
      elements : elements,
      interior : interior,
      scales: {x:scale_x, y:scale_y},
      zoom: function(params, time) {
          if (params) zoom.on('zoom').call(zoomNode, params, time);
          return d3.zoomTransform(zoomNode);
      },
      build : build
    };
    }();

  function setData(rowData, i) { datasets[i||0] = BrunelD3.makeData(rowData) }
  function updateAll(time) { charts.forEach(function(x) {x.build(time || 0)}) }
  function buildAll() {
    for (var i=0;i<arguments.length;i++) setData(arguments[i], i);
    updateAll(transitionTime);
  }

  return {
    dataPreProcess:     function(f) { if (f) pre = f; return pre },
    dataPostProcess:    function(f) { if (f) post = f; return post },
    data:               function(d,i) { if (d) setData(d,i); return datasets[i||0] },
    visId:              visId,
    build:              buildAll,
    rebuild:            updateAll,
    charts:             charts
  }
}

// Data Tables /////////////////////////////////////////////////////////////////////////////////////

var table1 = {
   names: ['horsepower', 'weight'], 
   options: ['string', 'string'], 
   rows: [['130', '3504'], ['165', '3693'], ['150', '3436'], ['150', '3433'], ['140', '3449'],
  ['198', '4341'], ['220', '4354'], ['215', '4312'], ['225', '4425'], ['190', '3850'],
  ['165', '4142'], ['153', '4034'], ['175', '4166'], ['175', '3850'], ['170', '3563'],
  ['160', '3609'], ['140', '3353'], ['150', '3761'], ['225', '3086'], ['95', '2833'], ['97', '2774'],
  ['85', '2587'], ['90', '2648'], ['215', '4615'], ['200', '4376'], ['210', '4382'], ['193', '4732'],
  ['90', '2264'], ['nan', '2046'], ['100', '2634'], ['105', '3439'], ['100', '3329'], ['88', '3302'],
  ['100', '3288'], ['165', '4209'], ['175', '4464'], ['153', '4154'], ['150', '4096'],
  ['180', '4955'], ['170', '4746'], ['175', '5140'], ['110', '2962'], ['72', '2408'],
  ['100', '3282'], ['88', '3139'], ['86', '2220'], ['70', '1955'], ['80', '2126'], ['90', '2408'],
  ['86', '2226'], ['165', '4274'], ['175', '4385'], ['150', '4135'], ['153', '4129'],
  ['150', '3672'], ['208', '4633'], ['155', '4502'], ['160', '4456'], ['190', '4422'],
  ['150', '3892'], ['130', '4098'], ['140', '4294'], ['150', '4077'], ['86', '2395'], ['80', '2164'],
  ['175', '4100'], ['150', '3672'], ['145', '3988'], ['137', '4042'], ['150', '3777'],
  ['198', '4952'], ['150', '4464'], ['158', '4363'], ['150', '4237'], ['215', '4735'],
  ['225', '4951'], ['175', '3821'], ['105', '3121'], ['100', '3278'], ['100', '2945'],
  ['88', '3021'], ['95', '2904'], ['150', '4997'], ['167', '4906'], ['170', '4654'], ['180', '4499'],
  ['100', '2789'], ['72', '2401'], ['85', '2310'], ['107', '2472'], ['145', '4082'], ['230', '4278'],
  ['150', '3399'], ['180', '3664'], ['95', '3102'], ['nan', '2875'], ['100', '2901'],
  ['100', '3336'], ['80', '2451'], ['75', '2542'], ['100', '3781'], ['110', '3632'], ['105', '3613'],
  ['140', '4141'], ['150', '4699'], ['150', '4457'], ['140', '4638'], ['150', '4257'],
  ['75', '2125'], ['95', '3264'], ['105', '3459'], ['72', '3432'], ['72', '3158'], ['170', '4668'],
  ['145', '4440'], ['150', '4498'], ['148', '4657'], ['110', '3907'], ['105', '3897'],
  ['110', '3730'], ['95', '3785'], ['110', '3039'], ['110', '3221'], ['129', '3169'], ['83', '2639'],
  ['100', '2914'], ['78', '2592'], ['97', '2984'], ['90', '3211'], ['92', '2572'], ['79', '2255'],
  ['140', '4215'], ['150', '4190'], ['120', '3962'], ['152', '4215'], ['100', '3233'],
  ['105', '3353'], ['81', '3012'], ['90', '3085'], ['52', '2035'], ['60', '2164'], ['100', '3651'],
  ['78', '3574'], ['110', '3645'], ['95', '3193'], ['72', '2565'], ['150', '3940'], ['180', '4380'],
  ['145', '4055'], ['130', '3870'], ['150', '3755'], ['80', '2155'], ['96', '2300'], ['145', '3880'],
  ['110', '4060'], ['145', '4140'], ['130', '4295'], ['110', '3520'], ['105', '3425'],
  ['100', '3630'], ['98', '3525'], ['180', '4220'], ['170', '4165'], ['190', '4325'],
  ['149', '4335'], ['88', '2740'], ['89', '2755'], ['63', '2051'], ['83', '2075'], ['66', '1800'],
  ['110', '3365'], ['140', '3735'], ['139', '3570'], ['105', '3535'], ['95', '3155'], ['85', '2965'],
  ['88', '2720'], ['100', '3430'], ['90', '3210'], ['105', '3380'], ['85', '3070'], ['110', '3620'],
  ['120', '3410'], ['145', '3425'], ['165', '3445'], ['139', '3205'], ['140', '4080'],
  ['68', '2155'], ['75', '2230'], ['105', '2745'], ['85', '2855'], ['115', '3245'], ['85', '2990'],
  ['88', '2890'], ['90', '3265'], ['110', '3360'], ['130', '3840'], ['129', '3725'], ['138', '3955'],
  ['135', '3830'], ['155', '4360'], ['142', '4054'], ['125', '3605'], ['150', '3940'],
  ['80', '1915'], ['80', '2670'], ['125', '3900'], ['90', '3420'], ['70', '2200'], ['70', '2150'],
  ['90', '2670'], ['115', '2595'], ['115', '2700'], ['90', '2556'], ['70', '2120'], ['90', '2678'],
  ['88', '2870'], ['90', '3003'], ['90', '3381'], ['105', '2800'], ['nan', '2905'], ['84', '2490'],
  ['84', '2635'], ['92', '2620'], ['110', '2725'], ['84', '2385'], ['64', '1875'], ['63', '2215'],
  ['65', '2045'], ['65', '2380'], ['110', '3415'], ['105', '3725'], ['88', '3060'], ['85', '3465'],
  ['88', '2605'], ['88', '2640'], ['88', '2395'], ['85', '2575'], ['84', '2525'], ['90', '2735'],
  ['92', '2865'], ['nan', '3035'], ['63', '2125'], ['70', '2125'], ['110', '2945'], ['85', '3015'],
  ['92', '2585'], ['112', '2835'], ['84', '2370'], ['90', '2950'], ['86', '2790'], ['84', '2295'],
  ['79', '2625'], ['82', '2720'], ['115', '3090'], ['46', '1835'], ['87', '2672'], ['90', '2430'],
  ['95', '2375'], ['113', '2234'], ['48', '1978'], ['90', '2123'], ['70', '2074'], ['76', '2065'],
  ['60', '1834'], ['54', '2254'], ['112', '2933'], ['76', '2511'], ['87', '2979'], ['69', '2189'],
  ['46', '1950'], ['90', '2265'], ['49', '1867'], ['75', '2158'], ['91', '2582'], ['112', '2868'],
  ['110', '2660'], ['83', '2219'], ['67', '1963'], ['78', '2300'], ['75', '2108'], ['75', '2246'],
  ['67', '2000'], ['71', '2223'], ['70', '1937'], ['95', '2694'], ['88', '2957'], ['98', '2945'],
  ['115', '2671'], ['86', '2464'], ['81', '2220'], ['83', '2202'], ['70', '1937'], ['71', '1825'],
  ['102', '3150'], ['88', '3270'], ['120', '3820'], ['58', '1825'], ['78', '1940'], ['78', '2190'],
  ['110', '2600'], ['48', '1985'], ['103', '2830'], ['125', '3140'], ['115', '2795'],
  ['133', '3410'], ['71', '1990'], ['71', '1925'], ['77', '3530'], ['71', '3190'], ['69', '2130'],
  ['76', '2144'], ['78', '2188'], ['48', '2085'], ['48', '2335'], ['67', '2950'], ['67', '3250'],
  ['nan', '1835'], ['62', '1845'], ['88', '2500'], ['74', '2190'], ['nan', '2320'], ['80', '3230'],
  ['110', '2800'], ['76', '3160'], ['74', '1980'], ['52', '2130'], ['95', '2372'], ['88', '2130'],
  ['88', '2130'], ['95', '2228'], ['65', '1773'], ['69', '1613'], ['95', '2278'], ['97', '2330'],
  ['92', '2288'], ['97', '2506'], ['88', '2100'], ['88', '2279'], ['94', '2379'], ['90', '2124'],
  ['122', '2807'], ['67', '1950'], ['65', '1836'], ['52', '1649'], ['61', '2003'], ['97', '2489'],
  ['93', '2391'], ['75', '2171'], ['96', '2702'], ['97', '2545'], ['53', '1795'], ['53', '1795'],
  ['70', '1990'], ['75', '2155'], ['108', '2930'], ['68', '2045'], ['70', '1945'], ['75', '2265'],
  ['67', '1985'], ['97', '2815'], ['110', '2720'], ['52', '1985'], ['70', '2070'], ['60', '1800'],
  ['95', '2560'], ['97', '2300'], ['95', '2515'], ['97', '2405'], ['68', '2135'], ['65', '1975'],
  ['65', '2020'], ['60', '1968'], ['65', '2019'], ['90', '2711'], ['75', '2542'], ['92', '2434'],
  ['75', '2265'], ['65', '2110'], ['65', '2110'], ['67', '1850'], ['67', '2145'], ['132', '2910'],
  ['100', '2420'], ['72', '2290'], ['58', '1755'], ['60', '1760'], ['67', '2065'], ['65', '1975'],
  ['62', '2050'], ['68', '1985'], ['75', '2210'], ['75', '2350'], ['100', '2615'], ['74', '2635'],
  ['116', '2900'], ['120', '2930'], ['68', '2025'], ['68', '1970'], ['88', '2160'], ['75', '2205'],
  ['70', '2245'], ['67', '1965'], ['67', '1965'], ['67', '1995'], ['96', '2665']]
};

// Call Code to Build the system ///////////////////////////////////////////////////////////////////

var v = new BrunelVis('visidc3a76aed-cd8b-49e1-9e6c-a226526b4da6');
v.build(table1);

            ""
        });
        });
        </script>
</link></link></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>데이터 분석을 위해 자주 사용하는 차트들은 지원되는거 같습니다.</p>
<p>더 자세한 사용법은 튜토리얼을 참고하세요.</p>
</div>
</div>
</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

    </article>

<div class="analytics">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-81648003-1', 'auto');
    ga('send', 'pageview');

  </script>
  
</div><div class="adsense">

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- comafire.github.io -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0670106451680512"
     data-ad-slot="4127959151"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div>
<div id="disqus_thread"></div>
<script>

/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//comafire.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>    <hr>

            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Blog powered by <a href="http://getpelican.com">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="/theme/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/theme/js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/theme/js/clean-blog.min.js"></script>

</body>

</html>